<!-- ======= Footer ======= -->
<footer id="footer">
  <div class="footer-top">
    <div class="container">
      <div class="row">
        <div class="col-lg-4 col-md-6">
          <div class="footer-info">
            <h3>Heritage App</h3>
            <p class="pb-3"><em>Heritage Site Identifier and Damage Assessment App is an Android app designed to
                identify cultural heritage sites and assess any potential damage, aiding in their preservation and
                protection.</em>
            </p>
            <p>
              938 Aurora Blvd, Cubao, <br>
              Quezon City, 1109 Metro Manila<br><br>
              <strong>Phone:</strong> +63 912 345 6789<br>
              <strong>Email:</strong> capstone.project@gmail.com<br>
            </p>
            <div class="social-links mt-3">
              <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
              <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
              <a href="#" class="instagram"><i class="bx bxl-instagram"></i></a>
              <a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>
              <a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
            </div>
          </div>
        </div>

        <div class="col-lg-2 col-md-6 footer-links">
          <h4>Useful Links</h4>
          <ul>
            <li><i class="bx bx-chevron-right"></i> <a href="#hero">Home</a></li>
            <li><i class="bx bx-chevron-right"></i> <a href="#about">About the Project</a></li>
            <li><i class="bx bx-chevron-right"></i> <a href="#contact">Contact</a></li>
          </ul>
        </div>

        <div class="col-lg-2 col-md-6 footer-links">
          <h4>Our Services</h4>
          <ul>
            <li><i class="bx bx-chevron-right"></i> <a href="javascript:void(0)">Machine Learning</a></li>
            <li><i class="bx bx-chevron-right"></i> <a href="javascript:void(0)">Object Detection</a></li>
            <li><i class="bx bx-chevron-right"></i> <a href="javascript:void(0)">Artificial Intelligence</a></li>
            <li><i class="bx bx-chevron-right"></i> <a href="javascript:void(0)">Algorithm</a></li>
          </ul>
        </div>

        <div class="col-lg-4 col-md-6 footer-newsletter">
          <h4>Our Newsletter</h4>
          <p>Subscribe to get the latest update of the app.</p>
          <form action="javascript:void(0)">
            <input type="email" name="email"><input type="submit" value="Subscribe">
          </form>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="copyright">
      &copy; Copyright <strong><span>Heritage App</span></strong>. All Rights Reserved
    </div>
  </div>
</footer>
<!-- End Footer -->

<a href="#" class="back-to-top d-flex align-items-center justify-content-center">
  <i class="bi bi-arrow-up-short"></i>
</a>

<div id="preloader"></div>

<!-- List New Image Modal -->
<div class="modal fade" id="list_new_image" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">List New Image</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form action="/unlisted_images" method="POST" enctype="multipart/form-data" id="list_new_image_form">
        <div class="modal-body">
          <div class="w-100 text-center">
            <img id="imagePreview" src="{{ url_for('static', filename='assets/img/no-image.png') }}" alt="Image Preview"
              style="width: 100%;" class="img-thumbnail mb-2">
          </div>

          <div class="mb-3 w-100 d-flex justify-content-center">
            <input type="file" class="form-control" id="imageInput" name="object_image" accept="image/*" required>
          </div>

          <div>
            <label for="list_new_image_object_name" class="form-label">Object Name</label>
            <input type="text" class="form-control" id="list_new_image_object_name" name="object_name" required>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary" id="list_new_image_submit">Submit</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Vendor JS Files -->
<script src="{{ url_for('static', filename='assets/vendor/purecounter/purecounter_vanilla.js') }}"></script>
<script src="{{ url_for('static', filename='assets/vendor/aos/aos.js') }}"></script>
<script src="{{ url_for('static', filename='assets/vendor/bootstrap/js/bootstrap.bundle.min.js') }}"></script>
<script src="{{ url_for('static', filename='assets/vendor/glightbox/js/glightbox.min.js') }}"></script>
<script src="{{ url_for('static', filename='assets/vendor/swiper/swiper-bundle.min.js') }}"></script>
<script src="{{ url_for('static', filename='assets/vendor/jquery/jquery-3.7.1.js') }}"></script>
<script src="{{ url_for('static', filename='assets/vendor/sweetalert2/sweetalert2@11.js') }}"></script>

<!-- Template Main JS File -->
<script src="{{ url_for('static', filename='assets/js/main.js') }}"></script>

<script>
  $(document).ready(function () {
    var currentPageUrl = window.location.href;
    var url = new URL(currentPageUrl);
    var path = url.pathname.substring(1);

    var header = document.getElementById("header");
    var home = document.getElementById("nav_home");
    var about = document.getElementById("nav_about");
    var contact = document.getElementById("nav_contact");
    var detect = document.getElementById("nav_detect");
    var unlisted_images = document.getElementById("nav_unlisted_images");

    var imageInput = document.getElementById("fileInput");
    var previewImage = document.getElementById("previewImage");
    var result_form = document.getElementById("result_form");
    var result_submit = document.getElementById("result_submit");

    var list_new_image_object_name = document.getElementById("list_new_image_object_name");
    var list_new_image_submit = document.getElementById("list_new_image_submit");
    var list_new_image_form = document.getElementById("list_new_image_form");

    var resultImage = document.getElementById("result-image");

    var notification = "{{notification}}";

    if (notification != "None") {
      notification = {
        "title": "{{ notification['title'] }}",
        "text": "{{ notification['text'] }}",
        "icon": "{{ notification['icon'] }}",
      }
    }

    if (path == "detect" || path == "result" || path == "unlisted_images" || path == "view_images") {
      header.classList.remove("header-transparent");
      home.classList.remove("active");

      home.setAttribute("href", "/");
      about.setAttribute("href", "/#about");
      contact.setAttribute("href", "/#contact");
    }
    else {
      header.classList.add("header-transparent");
      home.classList.add("active");
      detect.classList.remove("active");
      unlisted_images.classList.remove("active");

      home.setAttribute("href", "#hero");
      about.setAttribute("href", "#about");
      contact.setAttribute("href", "#contact");
    }

    if (path == "unlisted_images") {
      detect.classList.remove("active");
      unlisted_images.classList.add("active");

      list_new_image_form.addEventListener("submit", function () {
        list_new_image_submit.disabled = true;
        list_new_image_submit.textContent = "Please Wait...";
      });

      if (notification != "None") {
        sweet_alert(notification);
      }
    }

    if (path == "detect") {
      detect.classList.add("active");
      unlisted_images.classList.remove("active");

      imageInput.addEventListener("change", function () {
        if (imageInput.files && imageInput.files[0]) {
          var reader = new FileReader();

          reader.onload = function (e) {
            previewImage.src = e.target.result;
          };

          reader.readAsDataURL(imageInput.files[0]);
        }
      });

      result_form.addEventListener("submit", function () {
        result_submit.disabled = true;
        result_submit.textContent = "Please Wait...";
      });
    }

    if (path == "result") {
      if (resultImage) {
        var currentWidth = resultImage.offsetWidth;

        resultImage.style.height = currentWidth + "px";
      }
    }

    document.getElementById('imageInput').addEventListener('change', function (event) {
      var input = event.target;
      var imgElement = document.getElementById('imagePreview');

      if (!input.files || !input.files[0]) {
        imgElement.src = "{{ url_for('static', filename='assets/img/no-image.png') }}";
      }
      else {
        var reader = new FileReader();

        reader.onload = function () {
          imgElement.src = reader.result;
        };

        reader.readAsDataURL(input.files[0]);
      }
    });

    $(".view_images").click(function () {
      var folder_name = $(this).attr("folder_name");

      $('#folder_name').val(folder_name);

      $('#view_images_form').submit();
    })

    function sweet_alert(data) {
      Swal.fire({
        title: data.title,
        text: data.text,
        icon: data.icon
      });
    }
  })
</script>
</body>

</html>